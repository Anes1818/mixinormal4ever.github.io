<!DOCTYPE html>
<html dir="ltr" lang="en">
<head>
<meta charset="UTF-8">
<meta content="width=device-width,initial-scale=1" name="viewport">
<title>A+K Love Archive</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet">
<!-- Add Three.js and additional fonts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Cinzel:wght@400;700&display=swap" rel="stylesheet">
<style>
@import url(https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Cairo:wght@400;700&family=Great+Vibes&family=Raleway:wght@300;400&display=swap);

:root {
    --main-bg: #0a011f;
    --text-color: #f8e3ff;
    --accent-pink: #ff4b8a;
    --accent-gold: #ffcc00;
    --accent-purple: #9d4edd;
    --card-bg: rgba(29, 0, 61, 0.3);
    --transition: all 0.7s cubic-bezier(0.16, 1, 0.3, 1);
    --glass-effect: linear-gradient(135deg, rgba(255,255,255,0.05), rgba(255,255,255,0));
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: Amiri, serif;
    background: var(--main-bg);
    color: var(--text-color);
    overflow-x: hidden;
    min-height: 100vh;
    position: relative;
    background-image: radial-gradient(circle at 20% 30%, rgba(157,78,221,.15) 0, transparent 30%),
                      radial-gradient(circle at 80% 70%, rgba(255,75,138,.15) 0, transparent 30%);
}

/* === New Countdown Timer Styles === */
.countdown-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    z-index: 1000;
    padding: 15px 20px;
    background: linear-gradient(135deg, rgba(157, 78, 221, 0.9), rgba(255, 75, 138, 0.9));
    backdrop-filter: blur(10px);
    border-bottom: 2px solid var(--accent-gold);
    box-shadow: 0 5px 25px rgba(0, 0, 0, 0.3);
    transform: translateY(0);
    transition: transform 0.5s ease;
}

.countdown-container.hidden {
    transform: translateY(-100%);
}

.countdown-content {
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 15px;
}

.countdown-title {
    font-family: 'Great Vibes', cursive;
    font-size: 1.8rem;
    color: white;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    display: flex;
    align-items: center;
    gap: 10px;
}

.countdown-title i {
    color: var(--accent-gold);
    animation: pulse 2s infinite;
}

.countdown-timer {
    display: flex;
    gap: 20px;
    flex-wrap: wrap;
}

.time-unit {
    display: flex;
    flex-direction: column;
    align-items: center;
    min-width: 70px;
}

.time-value {
    font-size: 2.2rem;
    font-weight: bold;
    font-family: 'Cairo', sans-serif;
    background: rgba(10, 1, 31, 0.7);
    padding: 5px 15px;
    border-radius: 10px;
    min-width: 70px;
    text-align: center;
    color: var(--accent-gold);
    text-shadow: 0 0 10px rgba(255, 204, 0, 0.5);
    border: 1px solid rgba(255, 204, 0, 0.3);
    box-shadow: 0 0 15px rgba(255, 204, 0, 0.2);
    transition: var(--transition);
}

.time-unit:hover .time-value {
    transform: translateY(-5px);
    box-shadow: 0 5px 20px rgba(255, 204, 0, 0.4);
    background: rgba(10, 1, 31, 0.9);
}

.time-label {
    font-size: 0.9rem;
    margin-top: 5px;
    color: white;
    text-transform: uppercase;
    letter-spacing: 1px;
    opacity: 0.9;
}

.countdown-message {
    font-style: italic;
    color: white;
    text-align: center;
    font-size: 0.9rem;
    opacity: 0.8;
    margin-top: 5px;
    flex-basis: 100%;
    font-family: 'Raleway', sans-serif;
}

@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}

@media (max-width: 768px) {
    .countdown-content {
        flex-direction: column;
        gap: 10px;
        text-align: center;
    }
    
    .countdown-title {
        font-size: 1.5rem;
    }
    
    .countdown-timer {
        gap: 10px;
        justify-content: center;
    }
    
    .time-unit {
        min-width: 60px;
    }
    
    .time-value {
        font-size: 1.8rem;
        padding: 5px 10px;
        min-width: 60px;
    }
    
    .time-label {
        font-size: 0.8rem;
    }
}

@media (max-width: 480px) {
    .countdown-container {
        padding: 10px 15px;
    }
    
    .countdown-title {
        font-size: 1.3rem;
    }
    
    .countdown-timer {
        gap: 8px;
    }
    
    .time-unit {
        min-width: 55px;
    }
    
    .time-value {
        font-size: 1.5rem;
        min-width: 55px;
    }
}
/* === End Countdown Timer Styles === */

.cosmic-bg {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
    overflow: hidden;
}

.star {
    position: absolute;
    background: #fff;
    border-radius: 50%;
    filter: drop-shadow(0 0 5px currentColor);
    animation: twinkle var(--duration,5s) infinite alternate;
}

@keyframes twinkle {
    0% { opacity: .3; transform: scale(.8); }
    100% { opacity: 1; transform: scale(1.2); }
}

.comet {
    position: absolute;
    width: 6px;
    height: 6px;
    background: linear-gradient(90deg, rgba(255,255,255,0), #fff, #fff);
    border-radius: 50%;
    filter: blur(1px);
    animation: cometFly var(--duration,20s) linear infinite;
    opacity: 0;
}

@keyframes cometFly {
    0% { transform: translateX(0) translateY(0); opacity: 0; }
    10% { opacity: 1; }
    100% { transform: translateX(100vw) translateY(100vh); opacity: 0; }
}

.magic-header {
    text-align: center;
    padding: 3rem 0;
    position: relative;
    perspective: 1000px;
}

.magic-header h1 {
    font-family: 'Great Vibes', cursive;
    font-size: 5rem;
    margin-bottom: 1rem;
    background: linear-gradient(135deg, var(--accent-pink), var(--accent-gold));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: 0 0 20px rgba(255,75,138,.3);
    animation: float 6s ease-in-out infinite;
    position: relative;
    display: inline-block;
}

.magic-header h1::after {
    content: '';
    position: absolute;
    bottom: -10px;
    left: 0;
    width: 100%;
    height: 3px;
    background: linear-gradient(90deg, transparent, var(--accent-purple), transparent);
    transform: scaleX(0);
    transform-origin: center;
    animation: expandLine 4s ease-in-out infinite 1s;
}

@keyframes float {
    0%, 100% { transform: translateY(0) rotate(-2deg); }
    50% { transform: translateY(-15px) rotate(2deg); }
}

@keyframes expandLine {
    0%, 100% { transform: scaleX(0); }
    50% { transform: scaleX(1); }
}

.cosmic-archive {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 3rem;
    padding: 2rem;
    max-width: 1200px;
    margin: 0 auto;
}

.memory-orbit {
    position: relative;
    width: 100%;
    max-width: 900px;
    height: 500px;
    margin: 2rem auto;
}

.memory-planet {
    position: absolute;
    width: 300px;
    height: 300px;
    border-radius: 50%;
    background: var(--glass-effect);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255,255,255,.1);
    box-shadow: 0 0 30px rgba(157,78,221,.3), inset 0 0 20px rgba(255,255,255,.1);
    overflow: hidden;
    transition: var(--transition);
    transform-style: preserve-3d;
    cursor: pointer;
}

.memory-planet:nth-child(1) {
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    z-index: 3;
    background-image: url(https://i.postimg.cc/76FqQNdP/Screenshot-20250627-181208-Brave-1.jpg);
    background-size: cover;
}

.memory-planet:nth-child(2) {
    top: 30%;
    left: 10%;
    z-index: 2;
    width: 250px;
    height: 250px;
    background-image: url(https://i.postimg.cc/jqXzQbKg/Screenshot-20241226-152721-Drive.jpg);
    background-size: cover;
}

.memory-planet:nth-child(3) {
    top: 30%;
    right: 10%;
    z-index: 2;
    width: 250px;
    height: 250px;
    background-image: url(https://i.postimg.cc/4yWh9qn2/Screenshot-20250627-181732-Photos.jpg);
    background-size: cover;
}

.memory-planet:hover {
    transform: translateY(-10px) scale(1.05) rotateY(10deg);
    box-shadow: 0 0 50px rgba(255,75,138,.5), inset 0 0 30px rgba(255,255,255,.2);
    z-index: 10;
}

.planet-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(to top, rgba(0,0,0,.7), transparent 70%);
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    padding: 1.5rem;
    opacity: 0;
    transition: var(--transition);
}

.memory-planet:hover .planet-overlay {
    opacity: 1;
}

.planet-title {
    font-family: 'Great Vibes', cursive;
    font-size: 2rem;
    margin-bottom: .5rem;
    color: #fff;
    transform: translateY(20px);
    transition: var(--transition);
}

.planet-date {
    font-size: .9rem;
    color: var(--accent-gold);
    transform: translateY(20px);
    transition: var(--transition);
    transition-delay: .1s;
    padding-left: 50px;
}

.memory-planet:hover .planet-date,
.memory-planet:hover .planet-title {
    transform: translateY(0);
}

.galaxy-collection {
    width: 100%;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 2rem;
    margin-top: 4rem;
}

.galaxy-item {
    position: relative;
    width: 280px;
    height: 380px;
    border-radius: 20px;
    overflow: hidden;
    background: var(--card-bg);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255,255,255,.1);
    box-shadow: 0 10px 30px rgba(0,0,0,.2);
    transition: var(--transition);
    cursor: pointer;
}

.galaxy-item:hover {
    transform: translateY(-10px) scale(1.03);
    box-shadow: 0 15px 40px rgba(157,78,221,.4), 0 0 0 2px rgba(255,204,0,.3);
}

.galaxy-icon {
    position: absolute;
    top: 20px;
    right: 20px;
    font-size: 2rem;
    color: var(--accent-gold);
    z-index: 2;
}

.galaxy-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: var(--transition);
}

.galaxy-item:hover .galaxy-image {
    transform: scale(1.1);
    filter: brightness(.7);
}

.galaxy-content {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    padding: 2rem;
    background: linear-gradient(to top, rgba(10,1,31,.9), transparent);
    transform: translateY(100%);
    transition: var(--transition);
}

.galaxy-item:hover .galaxy-content {
    transform: translateY(0);
}

.galaxy-title {
    font-family: 'Great Vibes', cursive;
    font-size: 2rem;
    margin-bottom: .5rem;
    color: #fff;
}

.galaxy-desc {
    font-size: .9rem;
    line-height: 1.6;
    color: rgba(255,255,255,.8);
}

.playlist-section {
    width: 100%;
    max-width: 900px;
    margin: 4rem auto;
    padding: 2rem;
    background: var(--card-bg);
    backdrop-filter: blur(10px);
    border-radius: 20px;
    border: 1px solid rgba(255,255,255,.1);
    box-shadow: 0 0 30px rgba(157,78,221,.3);
}

.playlist-header {
    text-align: center;
    margin-bottom: 2rem;
}

.playlist-header h2 {
    font-family: 'Great Vibes', cursive;
    font-size: 3rem;
    color: var(--accent-pink);
    margin-bottom: 1rem;
}

.playlist-controls {
    display: flex;
    gap: 1rem;
    margin-bottom: 1rem;
}

#youtube-url {
    flex: 1;
    padding: .8rem;
    background: rgba(255,255,255,.1);
    border: 1px solid rgba(255,255,255,.2);
    border-radius: 10px;
    color: #fff;
    font-family: Amiri, serif;
}

#add-video {
    padding: .8rem 1.5rem;
    background: linear-gradient(135deg, var(--accent-pink), var(--accent-purple));
    border: none;
    border-radius: 10px;
    color: #fff;
    font-family: Amiri, serif;
    cursor: pointer;
    transition: var(--transition);
}

#add-video:hover {
    transform: translateY(-3px);
    box-shadow: 0 5px 15px rgba(255,75,138,.4);
}

.videos-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 1.5rem;
    margin-top: 2rem;
}

.video-item {
    position: relative;
    border-radius: 10px;
    overflow: hidden;
    background: rgba(0,0,0,.3);
    transition: var(--transition);
}

.video-item:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(255,75,138,.3);
}

.video-iframe {
    width: 100%;
    height: 200px;
    border: none;
    border-radius: 10px 10px 0 0;
    object-fit: cover;
}

.video-info {
    padding: 1rem;
    background: rgba(10,1,31,.7);
}

.video-title {
    font-weight: 700;
    margin-bottom: .5rem;
    color: var(--accent-gold);
}

.delete-video {
    position: absolute;
    top: 10px;
    left: 10px;
    background: rgba(0,0,0,.7);
    color: #fff;
    border: none;
    border-radius: 50%;
    width: 30px;
    height: 30px;
    cursor: pointer;
    transition: var(--transition);
}

.delete-video:hover {
    background: var(--accent-pink);
}

.intro-section {
    width: 100%;
    max-width: 900px;
    margin: 2rem auto;
    padding: 2rem;
    background: var(--card-bg);
    backdrop-filter: blur(10px);
    border-radius: 20px;
    border: 1px solid rgba(255,255,255,.1);
    box-shadow: 0 0 30px rgba(157,78,221,.3);
}

.heart-beat {
    animation: heartBeat 1.5s ease-in-out infinite;
}

@keyframes heartBeat {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}

.rotate-3d {
    animation: rotate3d 20s linear infinite;
}

@keyframes rotate3d {
    0% { transform: rotateY(0); }
    100% { transform: rotateY(360deg); }
}

@media (max-width: 768px) {
    .magic-header h1 {
        font-size: 3rem;
    }
    
    .memory-orbit {
        height: auto;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 2rem;
    }
    
    .memory-planet {
        position: relative;
        top: auto !important;
        left: auto !important;
        right: auto !important;
        transform: none !important;
        margin-bottom: 2rem;
    }
    
    .videos-container {
        grid-template-columns: 1fr;
    }
}

.love-letters-menu {
    position: relative;
    overflow: visible;
}

.sub-letters {
    position: absolute;
    top: calc(100% - 20px);
    left: 0;
    width: 100%;
    background: rgba(29,0,61,.95);
    backdrop-filter: blur(15px);
    border-radius: 0 0 20px 20px;
    overflow: hidden;
    max-height: 0;
    transition: all .5s cubic-bezier(.16,1,.3,1);
    z-index: 5;
    box-shadow: 0 10px 30px rgba(0,0,0,.3);
    border: 1px solid rgba(255,255,255,.1);
    border-top: none;
}

.love-letters-menu:hover .sub-letters {
    max-height: 500px;
    padding: 10px 0;
}

.sub-letter-item {
    padding: 1rem 1.5rem;
    border-top: 1px solid rgba(255,255,255,.05);
    transition: all .3s ease;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 10px;
    color: rgba(255,255,255,.8);
}

.sub-letter-item i {
    color: var(--accent-pink);
    transition: all .3s ease;
}

.sub-letter-item:hover {
    background: rgba(255,75,138,.15);
    padding-left: 2rem;
    color: #fff;
}

.sub-letter-item:hover i {
    transform: scale(1.2);
    color: var(--accent-gold);
}

.love-letters-menu:hover {
    border-radius: 20px 20px 0 0;
    z-index: 10;
}

.love-letters-menu:hover .galaxy-image {
    transform: scale(1.05);
    filter: brightness(.6) saturate(1.2);
}

.love-letters-menu:hover .galaxy-content {
    transform: translateY(0);
    background: linear-gradient(to top, rgba(29,0,61,.9), transparent);
}

.video-container-wrapper {
    position: relative;
    max-width: 800px;
    margin: 2rem auto;
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 0 20px 50px rgba(107,4,158,.3);
    border: 2px solid rgba(255,204,0,.3);
}

.local-video-container {
    position: relative;
    width: 100%;
    padding-top: 56.25%;
    background: #1d003d;
    overflow: hidden;
}

.romantic-video {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: contain;
}

.video-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    background: rgba(10,1,31,.4);
    transition: all .5s ease;
    z-index: 2;
}

.video-overlay:hover {
    background: rgba(10,1,31,.2);
}

.play-btn {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--accent-pink), var(--accent-purple));
    border: none;
    color: #fff;
    font-size: 2rem;
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow: 0 0 30px rgba(255,75,138,.5);
    transition: var(--transition);
    z-index: 3;
}

.play-btn:hover {
    transform: scale(1.1);
    box-shadow: 0 0 40px rgba(255,75,138,.8);
}

.local-video-container:hover .hearts-overlay {
    opacity: 1;
}

.video-controls {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 1.5rem;
    padding: 1.5rem;
    background: rgba(29,0,61,.7);
    border-radius: 0 0 20px 20px;
}

.control-btn {
    background: rgba(255,255,255,.1);
    border: 1px solid rgba(255,255,255,.2);
    color: #fff;
    padding: .8rem 1.5rem;
    border-radius: 50px;
    cursor: pointer;
    transition: var(--transition);
    display: flex;
    align-items: center;
    gap: .5rem;
    font-family: Amiri, serif;
}

.control-btn:hover {
    background: linear-gradient(135deg, var(--accent-pink), var(--accent-purple));
    transform: translateY(-3px);
}

#volumeSlider {
    width: 100px;
    cursor: pointer;
    accent-color: var(--accent-pink);
}

.love-quote {
    text-align: center;
    margin-top: 2rem;
    font-style: italic;
    font-size: 1.2rem;
    color: var(--accent-gold);
    opacity: .8;
    font-family: 'Great Vibes', cursive;
}

@media (max-width: 768px) {
    .playlist-controls {
        flex-direction: column;
    }
    
    #youtube-url {
        width: 100%;
        margin-bottom: 10px;
    }
    
    #add-video {
        width: 100%;
    }
    
    .video-iframe {
        height: 180px !important;
    }
    
    .galaxy-item {
        width: 100%;
        height: 300px;
    }
}

@media (max-width: 768px) {
    .magic-header h1 {
        font-size: 3rem !important;
    }
    
    .cosmic-archive {
        padding: 1rem;
        gap: 1.5rem;
    }
    
    .memory-planet {
        width: 250px !important;
        height: 250px !important;
    }
    
    #floating-moon {
        bottom: 70px !important;
        right: 20px !important;
        font-size: 2.5rem !important;
    }
}

.custom-video-popup {
    border: 1px solid var(--accent-purple) !important;
    border-radius: 20px !important;
    box-shadow: 0 0 40px rgba(157, 78, 221, 0.4) !important;
    overflow: hidden;
}

.memory-planet:nth-child(4) {
    background-size: cover;
}

/* ÿ™ÿµŸÖŸäŸÖ ŸÖÿ™ÿ¨ÿßŸàÿ® ŸÑŸÑŸÜÿßŸÅÿ∞ÿ© ÿßŸÑŸÖŸÜÿ®ÿ´ŸÇÿ© */
@media (max-width: 768px) {
    .custom-video-popup {
        width: 95% !important;
        margin: 0 10px !important;
    }
}

/* ÿ™ÿ≠ÿ≥ŸäŸÜ ÿ¥ŸÉŸÑ ÿπŸÜÿßÿµÿ± ÿßŸÑÿ™ÿ≠ŸÉŸÖ ÿ®ÿßŸÑŸÅŸäÿØŸäŸà */
.swal2-popup video::-webkit-media-controls {
    background: linear-gradient(to top, rgba(0,0,0,0.7), transparent);
}

.swal2-popup video::-webkit-media-controls-play-button {
    background-color: var(--accent-pink);
    border-radius: 50%;
}

/* ÿ£ŸÜŸÖÿßÿ∑ ÿÆÿßÿµÿ© ŸÑŸÑÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ© ÿπŸÑŸâ ÿßŸÑŸáŸàÿßÿ™ŸÅ - ŸÇÿ≥ŸÖ ÿßŸÑŸÉŸàÿßŸÉÿ® */
@media (max-width: 768px) {
    .memory-orbit {
        height: auto !important;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 2rem;
        padding: 1rem;
    }
    
    .memory-planet {
        position: relative !important;
        top: auto !important;
        left: auto !important;
        right: auto !important;
        transform: none !important;
        margin-bottom: 2rem;
        width: 280px !important;
        height: 280px !important;
    }
    
    .memory-planet:nth-child(2),
    .memory-planet:nth-child(3),
    .memory-planet:nth-child(4) {
        width: 240px !important;
        height: 240px !important;
    }
    
    .planet-overlay {
        padding: 1rem;
    }
    
    .planet-title {
        font-size: 1.7rem !important;
    }
    
    .planet-date {
        font-size: 0.8rem !important;
        padding-left: 20px !important;
    }
}

@media (max-width: 480px) {
    .memory-planet {
        width: 250px !important;
        height: 250px !important;
    }
    
    .memory-planet:nth-child(2),
    .memory-planet:nth-child(3),
    .memory-planet:nth-child(4) {
        width: 220px !important;
        height: 220px !important;
    }
    
    .planet-title {
        font-size: 1.5rem !important;
    }
} /* Add to your existing CSS */
#watch-room-btn {
    transition: var(--transition);
}

#watch-room-btn:hover {
    transform: scale(1.1) translateY(-5px);
    box-shadow: 0 8px 25px rgba(255,75,138,0.6);
}

@media (max-width: 768px) {
    #watch-room-btn {
        bottom: 20px;
        left: 20px;
        width: 60px;
        height: 60px;
        font-size: 2rem;
    }
    
    #watch-room-btn i {
        font-size: 1.5rem;
    }
    
    #floating-moon {
        bottom: 20px !important;
        right: 20px !important;
    }
}

@media (max-width: 480px) {
    #watch-room-btn {
        bottom: 15px;
        left: 15px;
        width: 55px;
        height: 55px;
    }
}

/* ===== FLOWER & HEART OVERLAY STYLES ===== */
.flower-heart-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #050007;
    z-index: 99999;
    opacity: 0;
    visibility: hidden;
    transition: opacity 1s ease, visibility 1s;
    overflow: hidden;
}

.flower-heart-overlay.active {
    opacity: 1;
    visibility: visible;
}

.flower-heart-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle at 10% 10%, #081018 0%, #050007 50%);
}

/* Three.js flower canvas */
#three-wrap {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
}

/* Heart particles canvas */
#pink-wrap {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: none;
    z-index: 38;
}

/* Overlay UI Controls */
.flower-overlay-ui {
    position: absolute;
    top: 20px;
    right: 20px;
    z-index: 100000;
    display: flex;
    gap: 10px;
}

.flower-btn {
    background: rgba(255, 255, 255, 0.1);
    color: white;
    border: 1px solid rgba(255, 255, 255, 0.2);
    padding: 10px 20px;
    border-radius: 8px;
    cursor: pointer;
    font-family: 'Cinzel', serif;
    font-size: 14px;
    backdrop-filter: blur(10px);
    transition: all 0.3s ease;
}

.flower-btn:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: translateY(-2px);
}

/* Heart overlay with romantic text */
.heart-overlay-container {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 40;
    pointer-events: none;
    opacity: 0;
    transform: scale(.98);
    transition: opacity 1.5s ease, transform 1.5s cubic-bezier(.2,.9,.2,1);
}

.heart-overlay-container.show {
    opacity: 1;
    transform: scale(1);
    pointer-events: auto;
}

/* Romantic center text - SLOWER AND MORE MAGICAL */
.romance {
    text-align: center;
    max-width: 90%;
    padding: 40px;
    border-radius: 20px;
    backdrop-filter: blur(10px) saturate(1.5);
    color: #fffefc;
    text-shadow:
        0 2px 6px rgba(0,0,0,0.6),
        0 6px 24px rgba(255,111,179,0.15);
    transform-origin: center;
    animation: magicalFloat 3.5s ease forwards;
    pointer-events: none;
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255,255,255,0.1);
}

@keyframes magicalFloat {
    0% { 
        transform: translateY(30px) scale(.95) rotateX(5deg);
        opacity: 0;
        filter: blur(5px);
    }
    40% { 
        transform: translateY(-10px) scale(1.02) rotateX(0);
        opacity: 1;
        filter: blur(0);
    }
    60% { 
        transform: translateY(0) scale(1.02);
        filter: brightness(1.2);
    }
    80% {
        transform: translateY(0) scale(1.01);
        filter: brightness(1.1);
    }
    100% { 
        transform: translateY(0) scale(1);
        opacity: 1;
        filter: brightness(1);
    }
}

.romance .line1 {
    font-family: "Great Vibes", cursive;
    font-size: clamp(32px, 7vw, 72px);
    letter-spacing: 1px;
    margin: 0 0 15px 0;
    color: #fff8fb;
    animation: textGlow 3s ease-in-out infinite alternate;
}

@keyframes textGlow {
    0% {
        text-shadow: 0 0 20px rgba(255, 255, 255, 0.3),
                     0 0 40px rgba(255, 111, 179, 0.2);
    }
    100% {
        text-shadow: 0 0 30px rgba(255, 255, 255, 0.4),
                     0 0 60px rgba(255, 111, 179, 0.3),
                     0 0 80px rgba(255, 111, 179, 0.2);
    }
}

.romance .line2 {
    font-family: "Cinzel", serif;
    font-size: clamp(14px, 2.5vw, 22px);
    opacity: 0.95;
    margin: 0 0 20px 0;
    color: #f6e9f1;
    animation: fadeInWords 4s ease forwards;
}

@keyframes fadeInWords {
    0% { opacity: 0; transform: translateY(10px); }
    50% { opacity: 0; transform: translateY(10px); }
    100% { opacity: 0.95; transform: translateY(0); }
}

/* Magical background pulse */
.romance::before {
    content: "";
    position: absolute;
    width: 400px;
    height: 400px;
    border-radius: 50%;
    transform: translate(-50%, -50%) scale(.8);
    left: 50%;
    top: 50%;
    filter: blur(50px);
    background: radial-gradient(
        circle at 40% 40%,
        rgba(255, 111, 179, 0.25),
        rgba(255, 111, 179, 0.1) 30%,
        transparent 70%
    );
    z-index: -1;
    animation: magicalPulse 4s infinite ease-in-out;
    mix-blend-mode: screen;
}

@keyframes magicalPulse {
    0% { 
        transform: translate(-50%, -50%) scale(.85);
        opacity: 0.8;
    }
    50% { 
        transform: translate(-50%, -50%) scale(1.1);
        opacity: 0.4;
    }
    100% { 
        transform: translate(-50%, -50%) scale(.85);
        opacity: 0.8;
    }
}

.romance .sub {
    display: block;
    margin-top: 15px;
    font-size: 16px;
    opacity: 0.9;
    color: #ffeef8;
    font-style: italic;
}

/* Center HUD */
.center-hud {
    position: absolute;
    z-index: 20;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    pointer-events: auto;
    text-align: center;
    color: rgba(255,255,255,0.95);
    user-select: none;
}

.center-hud .title {
    font-family: "Cinzel", serif;
    font-size: clamp(20px, 4vw, 36px);
    text-shadow: 0 6px 30px rgba(0,0,0,0.8);
    cursor: pointer;
    transition: all 0.3s ease;
}

/* Main site memory replay button */
#memory-replay-btn {
    position: fixed;
    bottom: 30px;
    right: 30px;
    z-index: 1000;
    padding: 12px 24px;
    background: linear-gradient(135deg, 
        rgba(157, 78, 221, 0.9), 
        rgba(255, 75, 138, 0.9));
    color: white;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    font-family: 'Amiri', serif;
    font-size: 1rem;
    box-shadow: 0 5px 20px rgba(157,78,221,0.4);
    border: 2px solid rgba(255,204,0,0.3);
    display: none;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
}

#memory-replay-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(157,78,221,0.6);
    background: linear-gradient(135deg, 
        rgba(157, 78, 221, 1), 
        rgba(255, 75, 138, 1));
}

/* Fade effect for overlay exit */
.fade-out {
    animation: fadeOut 1s ease forwards !important;
}

@keyframes fadeOut {
    0% { opacity: 1; }
    100% { opacity: 0; visibility: hidden; }
}

/* Loading indicator */
.loading-indicator {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: white;
    font-family: 'Cinzel', serif;
    font-size: 1.2rem;
    z-index: 100;
}

.loading-indicator i {
    animation: spin 1s linear infinite;
    margin-right: 10px;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* Make sure overlays work on mobile */
@media (max-width: 768px) {
    .flower-overlay-ui {
        top: 10px;
        right: 10px;
        flex-direction: column;
    }
    
    .flower-btn {
        padding: 8px 15px;
        font-size: 12px;
    }
    
    .romance {
        padding: 20px;
        margin: 20px;
    }
    
    #memory-replay-btn {
        bottom: 20px;
        right: 20px;
        padding: 10px 20px;
        font-size: 0.9rem;
    }
}
</style>
</head>
<body>

<!-- Password Protection -->
<div style="position:fixed;top:0;left:0;width:100%;height:100%;background:#0a011f;z-index:9999;display:flex;justify-content:center;align-items:center;flex-direction:column" id="password-protection">
    <div style="text-align:center;padding:2rem;background:rgba(29,0,61,.7);border-radius:20px;border:1px solid #9d4edd;max-width:400px;width:90%">
        <h1 style="font-family:'Great Vibes',cursive;font-size:2.5rem;color:#fc0;margin-bottom:1rem">Cosmic Love Archive</h1>
        <p style="margin-bottom:2rem;color:#f8e3ff">Enter the secret code to unlock our memories</p>
        <input id="password-input" placeholder="Enter code" style="padding:.8rem;width:100%;background:rgba(255,255,255,.1);border:1px solid #9d4edd;border-radius:10px;color:#fff;font-size:1.2rem;text-align:center;margin-bottom:1rem" type="password">
        <button onclick="checkPassword()" style="padding:.8rem 2rem;background:linear-gradient(135deg,#ff4b8a,#9d4edd);border:none;border-radius:10px;color:#fff;font-size:1rem;cursor:pointer">Unlock</button>
        <p style="color:#ff4b8a;margin-top:1rem;height:1.5rem" id="error-msg"></p>
    </div>
</div>

<!-- Flower & Heart Overlay -->
<div id="flower-heart-overlay" class="flower-heart-overlay" aria-hidden="true">
    <div class="flower-heart-container">
        <!-- Loading Indicator -->
        <div class="loading-indicator" id="flower-loading">
            <i class="fas fa-spinner"></i> Preparing magical moment...
        </div>
        
        <!-- Three.js flower canvas -->
        <div id="three-wrap">
            <canvas id="three-canvas"></canvas>
        </div>

        <!-- Heart particles canvas -->
        <div id="pink-wrap">
            <canvas id="pinkboard"></canvas>
        </div>

        <!-- Heart overlay with romantic text -->
        <div class="heart-overlay-container" id="heartOverlay">
            <div class="romance">
                <h1 class="line1" id="romLine">Ye beloved 3omri ‚Äî my heart doth ever bloom for thee</h1>
                <p class="line2" id="romSub">At year's end, I pledge my constancy; thou art the blossom of my nights.</p>
                <span class="sub">‚Äî With all my love</span>
            </div>
        </div>

        <!-- Overlay UI Controls -->
        <div class="flower-overlay-ui">
            <button class="flower-btn" id="exit-flower-btn" onclick="exitFlowerShow()">
                <i class="fas fa-times"></i> Exit
            </button>
            <button class="flower-btn" id="replay-flower-btn" onclick="replayFlowerShow()" style="display:none;">
                <i class="fas fa-redo"></i> Replay
            </button>
        </div>
    </div>
</div>

<!-- Countdown Timer -->
<div id="countdown-timer" class="countdown-container hidden">
    <div class="countdown-content">
        <div class="countdown-title">
            <i class="fas fa-heart"></i>
            Countdown to New Year 2026
            <i class="fas fa-heart"></i>
        </div>
        <div class="countdown-timer">
            <div class="time-unit">
                <div id="days" class="time-value">00</div>
                <div class="time-label">Days</div>
            </div>
            <div class="time-unit">
                <div id="hours" class="time-value">00</div>
                <div class="time-label">Hours</div>
            </div>
            <div class="time-unit">
                <div id="minutes" class="time-value">00</div>
                <div class="time-label">Minutes</div>
            </div>
            <div class="time-unit">
                <div id="seconds" class="time-value">00</div>
                <div class="time-label">Seconds</div>
            </div>
        </div>
        <div class="countdown-message">
            A small surprise awaits you. I love you.
        </div>
    </div>
</div>

<div class="cosmic-bg" id="cosmicBg"></div>

<header class="magic-header">
    <h1>Our Cosmic Love Archive</h1>
    <p>Every memory is a planet in our heart's galaxy</p>
</header>

<main class="cosmic-archive">
    <div class="memory-orbit">
        <div class="memory-planet heart-beat" onclick='window.open("https://draw.y99.in/boards/Mariana_anes","_blank")' style="background-image:url(https://i.postimg.cc/76FqQNdP/Screenshot-20250627-181208-Brave-1.jpg)">
            <div class="planet-overlay">
                <h3 class="planet-title">our room</h3>
                <p class="planet-date">our draws and poems</p>
            </div>
        </div>
        
        <div class="memory-planet" onclick='window.open("https://drive.google.com/file/d/16BtoctuVCOcFFSEPAiVD2caPuIoQQbOs/view","_blank")' style="background-image:url(https://i.postimg.cc/jqXzQbKg/Screenshot-20241226-152721-Drive.jpg)">
            <div class="planet-overlay">
                <h3 class="planet-title">journey to the moon</h3>
                <p class="planet-date">our poems</p>
            </div>
        </div>
        
        <div class="memory-planet" onclick="showComingSoon()" style="background-image:url(https://i.postimg.cc/4yWh9qn2/Screenshot-20250627-181732-Photos.jpg)">
            <div class="planet-overlay">
                <h3 class="planet-title">khadija heart:3</h3>
                <p class="planet-date">coming soon</p>
            </div>
        </div>
        
        <div class="memory-planet" onclick="showGiftVideo()" style="background-image:url('https://i.postimg.cc/FHSMCndr/Dofoto-20250918-15460954445cc25b9c2d39d94826119aa93e75413.jpg')">
            <div class="planet-overlay">
                <h3 class="planet-title">Words of ro7i</h3>
                <p class="planet-date">my my precious gift:3</p>
            </div>
        </div>
    </div>
    
    <div class="galaxy-collection">
        <div class="galaxy-item love-letters-menu">
            <i class="fas galaxy-icon fa-heart"></i>
            <img alt="Love Letters" class="galaxy-image" src="https://i.postimg.cc/NfF9RSkv/retouch-2025062922102263.jpg">
            <div class="sub-letters">
                <div class="sub-letter-item" onclick='window.open("https://drive.google.com/file/d/1bdzQZiARK--Od7ZjQ8BeWZwj47gXwiQp/view?usp=drivesdk","_blank")'>seraphic</div>
                <div class="sub-letter-item" onclick='window.open("https://drive.google.com/file/d/1_bXpY2B_TC-aX9Dq8Fl3YSwVdUQYp1gy/view?usp=drivesdk","_blank")'>letter</div>
                <div class="sub-letter-item" onclick='window.open("https://drive.google.com/file/d/16V-PSVpQNwBomUga4lwZ-cxWv73O6Ywx/view?usp=drivesdk","_blank")'>graduation</div>
                <div class="sub-letter-item" onclick='window.open("https://drive.google.com/file/d/16oMlA4KphW6Dz4yAW5KtoAN22tKv31L0/view?usp=drivesdk","_blank")'>words I hold dear</div>
                <div class="sub-letter-item" onclick='window.open("https://aes86.pixieset.com/lettreimalwayswithyou/","_blank")'>always with you</div>
            </div>
        </div>
        
        <div class="galaxy-item" onclick='window.open("https://aes86.pixieset.com/ourdraws/","_blank")'>
            <i class="fas galaxy-icon fa-paint-brush"></i>
            <img alt="Our Draws" class="galaxy-image" src="https://i.postimg.cc/7L5rV1Q6/Screenshot-20250629-223426-Gallery.jpg">
            <div class="galaxy-content">
                <h3 class="galaxy-title">Our Draws</h3>
                <p class="galaxy-desc">Beautiful drawings expressing our love</p>
            </div>
        </div>
        
        <div class="galaxy-item" onclick='window.open("https://aes86.pixieset.com/followers/","_blank")'>
            <i class="fas galaxy-icon fa-music"></i>
            <img alt="Our Songs" class="galaxy-image" src="https://i.postimg.cc/cHT7LY0R/Screenshot-20250629-230518-Photos.jpg">
            <div class="galaxy-content">
                <h3 class="galaxy-title">our petals</h3>
                <p class="galaxy-desc">followers we shared</p>
            </div>
        </div>
    </div>
    
    <div class="intro-section">
        <div class="playlist-header">
            <h2>Intro</h2>
            <p>I think this vid should be archived</p>
        </div>
        
        <div class="video-container-wrapper">
            <div class="local-video-container">
                <video class="romantic-video" controls id="ourLoveVideo" poster="https://i.postimg.cc/5yqrR5yz/Blue-Gold-Stars-Elegant-Rehearsal-Dinner-Invitation-20250630-173242-0000.png" preload="metadata">
                    <source src="/3omri/khadija/assets/videos/output(compress-video-online.com) (1).mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <div class="video-overlay">
                    <button onclick="playVideo()" class="heart-beat play-btn">
                        <i class="fas fa-play"></i>
                    </button>
                    <div class="hearts-overlay"></div>
                </div>
            </div>
            
            <div class="love-quote">
                <p>"Every moment with you feels like a beautiful dream I never want to wake up from khadija~"</p>
            </div>
        </div>
    </div>
    
    <div class="playlist-section">
        <div class="playlist-header">
            <h2>Our Playlist</h2>
            <p>Add your favorite songs/vids here!</p>
        </div>
        
        <div class="playlist-controls">
            <input id="youtube-url" placeholder="Enter YouTube link (e.g.: https://youtu.be/xxx)" dir="ltr">
            <button id="add-video">add</button>
        </div>
        
        <div class="videos-container" id="videos-container"></div>
    </div>
</main>

<a href="/3omri" id="floating-moon" style="position:fixed;bottom:30px;right:30px;font-size:3rem;cursor:pointer;z-index:100;animation:float 4s ease-in-out infinite;text-decoration:none;color:inherit">üåï</a>

<!-- Watch Room Button -->
<a href="baby.html" id="watch-room-btn" style="position:fixed;bottom:30px;left:30px;font-size:2.5rem;cursor:pointer;z-index:100;animation:float 4s ease-in-out infinite;text-decoration:none;color:inherit;background:linear-gradient(135deg, rgba(157,78,221,0.9), rgba(255,75,138,0.9));width:70px;height:70px;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 5px 20px rgba(157,78,221,0.4);border:2px solid rgba(255,204,0,0.5);">
    <i class="fas fa-video" style="font-size:1.8rem;color:#fff;"></i>
</a>

<!-- Memory Replay Button (Will appear after first show) -->
<button id="memory-replay-btn" onclick="replayFlowerShow()">
    <i class="fas fa-heart"></i> Our Start Year Memory
</button>

<!-- Shaders for flower system -->
<script type="x-shader/x-vertex" id="vertexShader">
    varying vec2 vUv;
    void main() {
      vUv = uv;
      gl_Position = vec4(position, 1.0);
    }
</script>

<script type="x-shader/x-fragment" id="fragmentShader">
    #define PI 3.14159265359
    uniform float u_ratio;
    uniform vec2 u_cursor;
    uniform float u_stop_time;
    uniform float u_clean;
    uniform vec2 u_stop_randomizer;
    uniform sampler2D u_texture;
    varying vec2 vUv;

    // Simple 2D noise helpers
    vec3 mod289(vec3 x){ return x - floor(x * (1.0 / 289.0)) * 289.0; }
    vec2 mod289(vec2 x){ return x - floor(x * (1.0 / 289.0)) * 289.0; }
    vec3 permute(vec3 x){ return mod289(((x*34.0)+1.0)*x); }

    float snoise(vec2 v) {
      const vec4 C = vec4(0.211324865405187,0.366025403784439,-0.577350269189626,0.024390243902439);
      vec2 i = floor(v + dot(v, C.yy));
      vec2 x0 = v - i + dot(i, C.xx);
      vec2 i1;
      i1 = (x0.x > x0.y) ? vec2(1.0,0.0) : vec2(0.0,1.0);
      vec4 x12 = x0.xyxy + C.xxzz;
      x12.xy -= i1;
      i = mod289(i);
      vec3 p = permute(permute(i.y + vec3(0.0, i1.y, 1.0)) + i.x + vec3(0.0, i1.x, 1.0));
      vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);
      m = m*m; m = m*m;
      vec3 x = 2.0 * fract(p * C.www) - 1.0;
      vec3 h = abs(x) - 0.5;
      vec3 ox = floor(x + 0.5);
      vec3 a0 = x - ox;
      m *= 1.79284291400159 - 0.85373472095314 * (a0*a0 + h*h);
      vec3 g;
      g.x = a0.x * x0.x + h.x * x0.y;
      g.yz = a0.yz * x12.xz + h.yz * x12.yw;
      return 130.0 * dot(m, g);
    }

    float get_flower_shape(vec2 _p, float _pet_n, float _angle, float _outline) {
      _angle *= 3.;
      _p = vec2(_p.x * cos(_angle) - _p.y * sin(_angle), _p.x * sin(_angle) + _p.y * cos(_angle));
      float a = atan(_p.y, _p.x);
      float flower_sectoral_shape = pow(abs(sin(a * _pet_n)), .4) + .25;
      vec2 flower_size_range = vec2(.03, .1);
      float size = flower_size_range[0] + u_stop_randomizer[0] * flower_size_range[1];
      float flower_radial_shape = pow(length(_p) / size, 2.);
      flower_radial_shape -= .1 * sin(8. * a);
      flower_radial_shape = max(.1, flower_radial_shape);
      flower_radial_shape += smoothstep(0., 0.03, -_p.y + .2 * abs(_p.x));
      float grow_time = step(.25, u_stop_time) * pow(u_stop_time, .3);
      float flower_shape = 1. - smoothstep(0., flower_sectoral_shape, _outline * flower_radial_shape / grow_time);
      flower_shape *= (1. - step(1., grow_time));
      return flower_shape;
    }

    float get_stem_shape(vec2 _p, vec2 _uv, float _w, float _angle) {
      _w = max(.004, _w);
      float x_offset = _p.y * sin(_angle);
      x_offset *= pow(3. * _uv.y, 2.);
      _p.x -= x_offset;
      float noise_power = .5;
      float cursor_horizontal_noise = noise_power * snoise(2. * _uv * u_stop_randomizer[0]);
      cursor_horizontal_noise *= pow(dot(_p.y, _p.y), .6);
      cursor_horizontal_noise *= pow(dot(_uv.y, _uv.y), .3);
      _p.x += cursor_horizontal_noise;
      float left = smoothstep(-_w, 0., _p.x);
      float right = 1. - smoothstep(0., _w, _p.x);
      float stem_shape = left * right;
      float grow_time = 1. - smoothstep(0., .2, u_stop_time);
      float stem_top_mask = smoothstep(0., pow(grow_time, .5), .03 -_p.y);
      stem_shape *= stem_top_mask;
      stem_shape *= (1. - step(.17, u_stop_time));
      return stem_shape;
    }

    void main() {
      vec3 base = texture2D(u_texture, vUv).xyz;
      vec2 uv = vUv;
      uv.x *= u_ratio;
      vec2 cursor = vUv - u_cursor.xy;
      cursor.x *= u_ratio;
      vec3 stem_color = vec3(.1 + u_stop_randomizer[0] * .6, .6, .2);
      vec3 flower_color = vec3(.6 + .5 * u_stop_randomizer[1], .1, .9 - .5 * u_stop_randomizer[1]);
      float angle = .5 * (u_stop_randomizer[0] - .5);
      float stem_shape = get_stem_shape(cursor, uv, .003, angle);
      stem_shape += get_stem_shape(cursor + vec2(0., .2 + .5 * u_stop_randomizer[0]), uv, .003, angle);
      float stem_mask = 1. - get_stem_shape(cursor, uv, .004, angle);
      stem_mask -= get_stem_shape(cursor + vec2(0., .2 + .5 * u_stop_randomizer[0]), uv, .004, angle);
      float petals_back_number = 1. + floor(u_stop_randomizer[0] * 2.);
      float angle_offset = -(2. * step(0., angle) - 1.) * .1 * u_stop_time;
      float flower_back_shape = get_flower_shape(cursor, petals_back_number, angle + angle_offset, 1.5);
      float flower_back_mask = 1. - get_flower_shape(cursor, petals_back_number, angle + angle_offset, 1.6);
      float petals_front_number = 2. + floor(u_stop_randomizer[1] * 2.);
      float flower_front_shape = get_flower_shape(cursor, petals_front_number, angle, 1.);
      float flower_front_mask = 1. - get_flower_shape(cursor, petals_front_number, angle, .95);
      vec3 color = base;
      color *= stem_mask;
      color *= flower_back_mask;
      color *= flower_front_mask;
      color += (stem_shape * stem_color);
      color += (flower_back_shape * (flower_color + vec3(0., .8 * u_stop_time, 0.)));
      color += (flower_front_shape * flower_color);
      color.r *= 1. - (.5 * flower_back_shape * flower_front_shape);
      color.b *= 1. - (flower_back_shape * flower_front_shape);
      color *= u_clean;
      gl_FragColor = vec4(color, 1.);
    }
</script>

<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

<script>
// üî• Firebase Configuration
const firebaseConfig = {
    apiKey: "AIzaSyBvHEucC6KmogScRgzB00uB3RZUtuscMI0",
    authDomain: "aness-20955.firebaseapp.com",
    databaseURL: "https://aness-20955-default-rtdb.firebaseio.com",
    projectId: "aness-20955",
    storageBucket: "aness-20955.firebasestorage.app",
    messagingSenderId: "922080882748",
    appId: "1:922080882748:web:b3a99f4778a8cd8f5c1339"
};

// Initialize Firebase
const app = firebase.initializeApp(firebaseConfig);
const database = firebase.database();

// ===== FLOWER & HEART INTEGRATION =====
let flowerHeartInitialized = false;
let hasShownNewYearMemory = false;
let countdownDisabled = false;
let flowerHeartSystem = null;

// Function to show the flower & heart animation
function showFlowerHeartAnimation() {
    if (hasShownNewYearMemory && countdownDisabled) {
        return; // Don't show if we've already disabled countdown
    }
    
    const overlay = document.getElementById('flower-heart-overlay');
    const loading = document.getElementById('flower-loading');
    
    overlay.classList.add('active');
    loading.style.display = 'block';
    
    // Initialize flower system if not already done
    if (!flowerHeartInitialized) {
        setTimeout(() => {
            initFlowerSystem();
            flowerHeartInitialized = true;
            loading.style.display = 'none';
            
            // Start with subtle demo flower
            setTimeout(() => {
                if (window._flowerControls) {
                    window._flowerControls.spawnFlower(0.75, 0.5, false);
                }
            }, 500);
            
            // Automatically progress to heart after delay
            setTimeout(() => {
                if (window._flowerControls) {
                    // Add 20 flowers quickly to trigger heart
                    for (let i = 0; i < 20; i++) {
                        setTimeout(() => {
                            window._flowerControls.spawnFlower(
                                Math.random() * 0.8 + 0.1,
                                Math.random() * 0.8 + 0.1,
                                true
                            );
                        }, i * 100);
                    }
                    
                    // Show heart sequence with delay
                    setTimeout(() => {
                        window._flowerControls.showHeartSequence();
                        
                        // SLOWER HEART PARTICLES CONFIGURATION
                        if (window._pink) {
                            // Override particle settings for slower, more magical effect
                            window._pink.settings = {
                                particles: {
                                    length: 500,
                                    duration: 4, // SLOWER duration (was 2)
                                    velocity: 80, // SLOWER velocity (was 100)
                                    effect: -0.75,
                                    size: 40 // LARGER particles (was 30)
                                }
                            };
                        }
                    }, 2500);
                }
            }, 1000);
        }, 500);
    } else {
        loading.style.display = 'none';
        replayFlowerShow();
    }
    
    // Mark that we've shown the memory
    hasShownNewYearMemory = true;
    
    // Disable countdown functionality
    disableCountdown();
}

// Function to exit the flower show
function exitFlowerShow() {
    const overlay = document.getElementById('flower-heart-overlay');
    overlay.classList.add('fade-out');
    
    setTimeout(() => {
        overlay.classList.remove('active');
        overlay.classList.remove('fade-out');
        
        // Show replay button on main site
        document.getElementById('memory-replay-btn').style.display = 'block';
        
        // Hide replay button inside overlay
        document.getElementById('replay-flower-btn').style.display = 'none';
        
        // Reset heart overlay
        const heartOverlay = document.getElementById('heartOverlay');
        heartOverlay.classList.remove('show');
        
        // Hide pink canvas
        const pinkWrap = document.getElementById('pink-wrap');
        pinkWrap.style.display = 'none';
        
        // Stop particle animation
        if (window._pink && window._pink.stop) {
            window._pink.stop();
        }
    }, 1000);
}

// Function to replay the flower show
function replayFlowerShow() {
    const overlay = document.getElementById('flower-heart-overlay');
    const replayBtn = document.getElementById('replay-flower-btn');
    
    if (!overlay.classList.contains('active')) {
        overlay.classList.add('active');
    }
    
    // Reset everything
    if (window._flowerControls) {
        window._flowerControls.clearFlowers();
        window._flowerControls.hideHeartSequence();
    }
    
    // Show replay button in overlay
    replayBtn.style.display = 'block';
    
    // Start the sequence again
    setTimeout(() => {
        // Add flowers
        for (let i = 0; i < 20; i++) {
            setTimeout(() => {
                if (window._flowerControls) {
                    window._flowerControls.spawnFlower(
                        Math.random() * 0.8 + 0.1,
                        Math.random() * 0.8 + 0.1,
                        true
                    );
                }
            }, i * 150); // Even slower this time
        }
        
        // Show heart with delay
        setTimeout(() => {
            if (window._flowerControls) {
                window._flowerControls.showHeartSequence();
            }
        }, 3500);
    }, 500);
}

// Function to disable countdown
function disableCountdown() {
    countdownDisabled = true;
    const countdownTimer = document.getElementById('countdown-timer');
    
    // Change countdown message
    const messageEl = countdownTimer.querySelector('.countdown-message');
    if (messageEl) {
        messageEl.innerHTML = '‚ú® Memory unlocked! Click "Our Start Year Memory" to relive the magic.';
        messageEl.style.color = '#ffcc00';
    }
    
    // Stop countdown updates
    // We'll handle this by checking countdownDisabled in updateCountdown()
}

// ===== MODIFIED COUNTDOWN FUNCTION =====
let hasCountdownEnded = false;

function updateCountdown() {
    // Don't update if countdown is disabled
    if (countdownDisabled) return;
    
    const now = new Date();
    const currentYear = now.getFullYear();
    
    // Set target to January 1, 2026, 00:00:00
    let targetYear = 2026;
    
    // If current year is already 2026 or later, set to next year
    if (currentYear >= 2026) {
        targetYear = currentYear + 1;
    }
    
    const targetDate = new Date(targetYear, 0, 1, 0, 0, 0, 0);
    const timeDifference = targetDate - now;
    
    if (timeDifference > 0) {
        const days = Math.floor(timeDifference / (1000 * 60 * 60 * 24));
        const hours = Math.floor((timeDifference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((timeDifference % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((timeDifference % (1000 * 60)) / 1000);
        
        // Update display with leading zeros
        document.getElementById('days').textContent = days.toString().padStart(2, '0');
        document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
        document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
        document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
        
        // Add pulsing animation when seconds change
        const secondsElement = document.getElementById('seconds');
        secondsElement.classList.add('pulse');
        setTimeout(() => secondsElement.classList.remove('pulse'), 300);
    } else {
        // Countdown finished
        if (!hasCountdownEnded) {
            hasCountdownEnded = true;
            
            document.getElementById('days').textContent = '00';
            document.getElementById('hours').textContent = '00';
            document.getElementById('minutes').textContent = '00';
            document.getElementById('seconds').textContent = '00';
            
            // Update message
            const messageEl = document.querySelector('.countdown-message');
            if (messageEl) {
                messageEl.innerHTML = 'üéâ Happy New Year 2026! üéâ The surprise is ready! I love you.';
                messageEl.style.color = '#ffcc00';
            }
            
            // Change background color
            const countdownTimer = document.getElementById('countdown-timer');
            countdownTimer.style.background = 
                'linear-gradient(135deg, rgba(255, 204, 0, 0.9), rgba(255, 75, 138, 0.9))';
            
            // Add celebration effect
            countdownTimer.classList.add('heart-beat');
            
            // Show the flower & heart animation after a short delay
            setTimeout(() => {
                showFlowerHeartAnimation();
            }, 1500);
        }
    }
}

// Initialize countdown
function initCountdown() {
    // Show countdown timer
    const countdownTimer = document.getElementById('countdown-timer');
    countdownTimer.classList.remove('hidden');
    
    // Update immediately
    updateCountdown();
    
    // Update every second only if not disabled
    const countdownInterval = setInterval(() => {
        if (!countdownDisabled) {
            updateCountdown();
        } else {
            clearInterval(countdownInterval);
        }
    }, 1000);
}

// ===== FLOWER SYSTEM INITIALIZATION =====
function initFlowerSystem() {
    // DOM refs
    const threeCanvas = document.getElementById('three-canvas');
    
    // click/flower counter
    let flowerCount = 0;

    // pointer state for shader
    const pointer = { x: 0.66, y: 0.5, clicked: false, vanishCanvas: false };

    // Three.js scene + render targets
    let renderer, sceneShader, sceneBasic, camera, clock;
    let shaderMaterial, basicMaterial;
    let renderTargets = [];

    initThree();
    animate();

    function initThree() {
        renderer = new THREE.WebGLRenderer({ canvas: threeCanvas, alpha:true, antialias:true });
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        renderer.setSize(window.innerWidth, window.innerHeight);

        sceneShader = new THREE.Scene();
        sceneBasic = new THREE.Scene();
        camera = new THREE.OrthographicCamera(-1,1,1,-1,0,10);
        clock = new THREE.Clock();

        // create render targets for feedback (persisting drawn flowers)
        renderTargets = [
            new THREE.WebGLRenderTarget(window.innerWidth, window.innerHeight),
            new THREE.WebGLRenderTarget(window.innerWidth, window.innerHeight)
        ];

        // shader material
        shaderMaterial = new THREE.ShaderMaterial({
            uniforms: {
                u_stop_time: { value: 0 },
                u_stop_randomizer: { value: new THREE.Vector2(Math.random(), Math.random()) },
                u_cursor: { value: new THREE.Vector2(pointer.x, pointer.y) },
                u_ratio: { value: window.innerWidth / window.innerHeight },
                u_texture: { value: null },
                u_clean: { value: 1 }
            },
            vertexShader: document.getElementById('vertexShader').textContent,
            fragmentShader: document.getElementById('fragmentShader').textContent,
            transparent: true
        });

        basicMaterial = new THREE.MeshBasicMaterial({ transparent:true });

        const planeGeometry = new THREE.PlaneGeometry(2,2);
        const planeBasic = new THREE.Mesh(planeGeometry, basicMaterial);
        const planeShader = new THREE.Mesh(planeGeometry, shaderMaterial);

        sceneBasic.add(planeBasic);
        sceneShader.add(planeShader);

        window.addEventListener('resize', onResize);
    }

    function onResize() {
        const w = window.innerWidth, h = window.innerHeight;
        renderer.setSize(w, h);
        shaderMaterial.uniforms.u_ratio.value = w / h;
        renderTargets.forEach(t => t.setSize(w, h));
    }

    function animate() {
        requestAnimationFrame(animate);

        shaderMaterial.uniforms.u_clean.value = pointer.vanishCanvas ? 0 : 1;
        shaderMaterial.uniforms.u_texture.value = renderTargets[0].texture;

        if (pointer.clicked) {
            shaderMaterial.uniforms.u_cursor.value = new THREE.Vector2(pointer.x, 1 - pointer.y);
            shaderMaterial.uniforms.u_stop_randomizer.value = new THREE.Vector2(Math.random(), Math.random());
            shaderMaterial.uniforms.u_stop_time.value = 0;
            pointer.clicked = false;
        }

        shaderMaterial.uniforms.u_stop_time.value += clock.getDelta();

        // Render to offscreen target then to screen (feedback)
        renderer.setRenderTarget(renderTargets[1]);
        renderer.render(sceneShader, camera);

        basicMaterial.map = renderTargets[1].texture;
        basicMaterial.needsUpdate = true;

        renderer.setRenderTarget(null);
        renderer.render(sceneBasic, camera);

        // swap targets
        const tmp = renderTargets[0]; renderTargets[0] = renderTargets[1]; renderTargets[1] = tmp;
    }

    // Spawn flower helper: sets pointer and click flag for shader to render flower into persistent render target
    function spawnFlower(normX, normY, countThisClick=true) {
        pointer.x = normX;
        pointer.y = normY;
        pointer.clicked = true;
    }

    // Clear all flowers from canvas
    function clearFlowers() {
        pointer.vanishCanvas = true;
        setTimeout(() => { pointer.vanishCanvas = false; }, 60);
    }

    // --- Heart sequence control ---
    let heartStarted = false;
    function showHeartSequence() {
        if (heartStarted) return;
        heartStarted = true;
        
        // Clear all flowers before showing the heart
        clearFlowers();
        
        // reveal pink canvas container
        document.getElementById('pink-wrap').style.display = 'block';
        // show overlay text after short delay for effect
        setTimeout(() => document.getElementById('heartOverlay').classList.add('show'), 420);
        // start particle heart animation
        startPinkboard();
        
        // Show replay button in overlay
        document.getElementById('replay-flower-btn').style.display = 'block';
    }
    
    function hideHeartSequence() {
        if (!heartStarted) return;
        heartStarted = false;
        document.getElementById('heartOverlay').classList.remove('show');
        document.getElementById('pink-wrap').style.display = 'none';
        stopPinkboard();
    }

    // Expose so console can trigger easy debugging
    window._flowerControls = { spawnFlower, showHeartSequence, hideHeartSequence, clearFlowers };
}

// ===== HEART PARTICLE SYSTEM =====
(function(){
    const canvas = document.getElementById('pinkboard');
    const wrap = document.getElementById('pink-wrap');
    let ctx = canvas.getContext('2d');
    let requestId = null;
    let time = null;

    // particle system settings - SLOWER VERSION
    window._pink = {
        settings: {
            particles: {
                length: 500,
                duration: 4, // SLOWER (was 2)
                velocity: 80, // SLOWER (was 100)
                effect: -0.75,
                size: 40 // LARGER (was 30)
            }
        }
    };

    // Point & Particle & Pool classes
    function Point(x,y){ this.x = x||0; this.y = y||0; }
    Point.prototype.clone = function(){ return new Point(this.x,this.y); }
    Point.prototype.length = function(length){
        if (typeof length === 'undefined') return Math.sqrt(this.x*this.x + this.y*this.y);
        this.normalize(); this.x *= length; this.y *= length; return this;
    }
    Point.prototype.normalize = function(){
        var l = Math.sqrt(this.x*this.x + this.y*this.y) || 1; this.x/=l; this.y/=l; return this;
    }

    function Particle(){
        this.position = new Point();
        this.velocity = new Point();
        this.acceleration = new Point();
        this.age = 0;
    }
    Particle.prototype.initialize = function(x,y,dx,dy){
        this.position.x = x; this.position.y = y;
        this.velocity.x = dx; this.velocity.y = dy;
        this.acceleration.x = dx * window._pink.settings.particles.effect;
        this.acceleration.y = dy * window._pink.settings.particles.effect;
        this.age = 0;
    }
    Particle.prototype.update = function(deltaTime){
        this.position.x += this.velocity.x * deltaTime;
        this.position.y += this.velocity.y * deltaTime;
        this.velocity.x += this.acceleration.x * deltaTime;
        this.velocity.y += this.acceleration.y * deltaTime;
        this.age += deltaTime;
    }
    Particle.prototype.draw = function(context,image){
        function ease(t){ return --t * t * t + 1; }
        let size = image.width * ease(this.age / window._pink.settings.particles.duration);
        context.globalAlpha = Math.max(0, 1 - this.age / window._pink.settings.particles.duration);
        context.drawImage(image, this.position.x - size/2, this.position.y - size/2, size, size);
    }

    function ParticlePool(length){
        this.particles = new Array(length);
        for (let i=0;i<length;i++) this.particles[i] = new Particle();
        this.firstActive = 0; this.firstFree = 0;
        this.duration = window._pink.settings.particles.duration;
    }
    ParticlePool.prototype.add = function(x,y,dx,dy){
        this.particles[this.firstFree].initialize(x,y,dx,dy);
        this.firstFree++;
        if (this.firstFree === this.particles.length) this.firstFree = 0;
        if (this.firstActive === this.firstFree) { this.firstActive++; if (this.firstActive === this.particles.length) this.firstActive = 0; }
    }
    ParticlePool.prototype.update = function(deltaTime){
        let p = this.particles;
        if (this.firstActive < this.firstFree) {
            for (let i=this.firstActive;i<this.firstFree;i++) p[i].update(deltaTime);
        }
        if (this.firstFree < this.firstActive) {
            for (let i=this.firstActive;i<p.length;i++) p[i].update(deltaTime);
            for (let i=0;i<this.firstFree;i++) p[i].update(deltaTime);
        }
        while (p[this.firstActive].age >= this.duration && this.firstActive != this.firstFree) {
            this.firstActive++;
            if (this.firstActive === p.length) this.firstActive = 0;
        }
    }
    ParticlePool.prototype.draw = function(context,image){
        let p = this.particles;
        if (this.firstActive < this.firstFree) {
            for (let i=this.firstActive;i<this.firstFree;i++) p[i].draw(context,image);
        }
        if (this.firstFree < this.firstActive) {
            for (let i=this.firstActive;i<p.length;i++) p[i].draw(context,image);
            for (let i=0;i<this.firstFree;i++) p[i].draw(context,image);
        }
    }

    // heart param function
    function pointOnHeart(t){
        return new Point(
            160 * Math.pow(Math.sin(t), 3),
            130 * Math.cos(t) - 50 * Math.cos(2*t) - 20 * Math.cos(3*t) - 10 * Math.cos(4*t) + 25
        );
    }

    // create particle image
    let particleImage = (function(){
        const c = document.createElement('canvas');
        const s = window._pink.settings.particles.size;
        c.width = s; c.height = s;
        const cx = c.getContext('2d');
        function to(t){
            const pt = pointOnHeart(t);
            pt.x = s/2 + (pt.x * s) / 350;
            pt.y = s/2 - (pt.y * s) / 350;
            return pt;
        }
        cx.beginPath();
        let t = -Math.PI; let p = to(t);
        cx.moveTo(p.x,p.y);
        while (t < Math.PI) {
            t += 0.01;
            p = to(t);
            cx.lineTo(p.x,p.y);
        }
        cx.closePath();
        cx.fillStyle = '#ffb0d8';
        cx.fill();
        const img = new Image();
        img.src = c.toDataURL();
        return img;
    })();

    // pool
    const pool = new ParticlePool(window._pink.settings.particles.length);
    let particleRate = window._pink.settings.particles.length / window._pink.settings.particles.duration;

    // render loop
    function renderLoop() {
        requestId = requestAnimationFrame(renderLoop);
        let newTime = Date.now()/1000;
        let deltaTime = newTime - (time || newTime);
        time = newTime;

        ctx.clearRect(0,0,canvas.width,canvas.height);

        // create new particles
        let amount = particleRate * deltaTime;
        for (let i=0;i<amount;i++){
            let pos = pointOnHeart(Math.PI - 2*Math.PI*Math.random());
            let dir = pos.clone().length(window._pink.settings.particles.velocity);
            pool.add(canvas.width/2 + pos.x, canvas.height/2 - pos.y, dir.x, -dir.y);
        }

        pool.update(deltaTime);
        pool.draw(ctx, particleImage);
    }

    function resize() {
        canvas.width = canvas.clientWidth;
        canvas.height = canvas.clientHeight;
    }
    window.addEventListener('resize', resize);

    // start/stop functions exposed to page
    window.startPinkboard = function(){
        // ensure visible & sized
        wrap.style.display = 'block';
        resize();
        if (!requestId) {
            time = null;
            requestId = requestAnimationFrame(renderLoop);
        }
    };
    window.stopPinkboard = function(){
        if (requestId) { cancelAnimationFrame(requestId); requestId = null; }
        // clear canvas visually and hide container
        ctx && ctx.clearRect(0,0,canvas.width,canvas.height);
        wrap.style.display = 'none';
    };

    // Initially don't run (startPinkboard called by Three module when needed)
    // Expose for debugging
    window._pink.start = window.startPinkboard;
    window._pink.stop = window.stopPinkboard;
})();

// ===== YOUR EXISTING SITE FUNCTIONS =====

// ÿ™ÿ≠ÿ≥ŸäŸÜ: ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÅŸäÿØŸäŸàŸáÿßÿ™ ŸÖÿ±ÿ© Ÿàÿßÿ≠ÿØÿ© ŸÅŸÇÿ∑ ÿπŸÜÿØ ÿßŸÑÿ≠ÿßÿ¨ÿ©
function loadVideos() {
    const videosContainer = document.getElementById('videos-container');
    videosContainer.innerHTML = '<div style="text-align:center;padding:2rem;color:var(--accent-gold)"><i class="fas fa-spinner fa-spin"></i> Loading videos...</div>';
    
    // ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ once ÿ®ÿØŸÑÿßŸã ŸÖŸÜ on ŸÑŸÑÿßÿ≥ÿ™ŸÖÿßÿπ ÿßŸÑŸÖÿ≥ÿ™ŸÖÿ±
    database.ref('playlist').orderByChild('addedAt').once('value')
        .then((snapshot) => {
            videosContainer.innerHTML = '';
            
            if (!snapshot.exists()) {
                videosContainer.innerHTML = '<div style="text-align:center;padding:2rem;color:var(--accent-gold)">No videos yet. Add the first one! ‚ù§</div>';
                return;
            }
            
            const videos = [];
            snapshot.forEach((childSnapshot) => {
                videos.push({
                    key: childSnapshot.key,
                    ...childSnapshot.val()
                });
            });
            
            // ÿ™ÿ±ÿ™Ÿäÿ® ÿßŸÑŸÅŸäÿØŸäŸàŸáÿßÿ™ ŸÖŸÜ ÿßŸÑÿ£ÿ≠ÿØÿ´ ÿ•ŸÑŸâ ÿßŸÑÿ£ŸÇÿØŸÖ
            videos.sort((a, b) => (b.addedAt || 0) - (a.addedAt || 0));
            
            // ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÅŸäÿØŸäŸàŸáÿßÿ™ ÿ®ÿ¥ŸÉŸÑ ŸÖÿ™ÿØÿ±ÿ¨
            let index = 0;
            function loadNextVideo() {
                if (index >= videos.length) return;
                
                const video = videos[index];
                addVideoToDOM(video.videoId, video.key, video);
                index++;
                
                // ÿ™ÿ£ÿÆŸäÿ± 100ms ÿ®ŸäŸÜ ŸÉŸÑ ŸÅŸäÿØŸäŸà
                if (index < videos.length) {
                    setTimeout(loadNextVideo, 100);
                }
            }
            
            loadNextVideo();
        })
        .catch(error => {
            console.error("Error loading videos:", error);
            videosContainer.innerHTML = '<div style="text-align:center;padding:2rem;color:var(--accent-pink)">Error loading videos. Please check connection.</div>';
        });
}

// ÿ™ÿ≠ÿ≥ŸäŸÜ: ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿµŸàÿ±ÿ© ŸÖÿµÿ∫ÿ±ÿ© ŸÑÿ™ŸÇŸÑŸäŸÑ ÿßŸÑÿ≠ŸÖŸÑ
function addVideoToDOM(videoId, firebaseKey, videoData) {
    const videosContainer = document.getElementById('videos-container');
    
    const addedDate = new Date(videoData.addedAt || videoData.date || Date.now());
    const formattedDate = addedDate.toLocaleDateString('en-US', {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
    hour: '2-digit',
    minute: '2-digit'
});
    
    const videoItem = document.createElement('div');
    videoItem.className = 'video-item';
    
    videoItem.innerHTML = `
        <button class="delete-video" onclick="deleteVideo('${firebaseKey}')" title="Delete video">
            <i class="fas fa-times"></i>
        </button>
        <div class="video-thumbnail" onclick="loadVideoPlayer('${videoId}', this)" 
             style="width:100%;height:200px;background:url(https://img.youtube.com/vi/${videoId}/mqdefault.jpg) center/cover;cursor:pointer;position:relative">
            <div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(255,75,138,0.8);border-radius:50%;width:60px;height:60px;display:flex;align-items:center;justify-content:center">
                <i class="fas fa-play" style="color:white;font-size:20px;margin-left:3px"></i>
            </div>
        </div>
        <div class="video-info">
            <div class="video-title">${videoData.title || 'Our Video'}</div>
            <small>Added: ${formattedDate}</small>
        </div>
    `;
    
    videosContainer.appendChild(videoItem);
}

// ÿ™ÿ≠ÿ≥ŸäŸÜ: ÿ™ÿ≠ŸÖŸäŸÑ ŸÖÿ¥ÿ∫ŸÑ ÿßŸÑŸÅŸäÿØŸäŸà ÿπŸÜÿØ ÿßŸÑÿ∑ŸÑÿ® ŸÅŸÇÿ∑
function loadVideoPlayer(videoId, thumbnailElement) {
    // ÿßÿ≥ÿ™ÿ®ÿØÿßŸÑ ÿßŸÑÿµŸàÿ±ÿ© ÿßŸÑŸÖÿµÿ∫ÿ±ÿ© ÿ®ŸÄ iframe
    const iframe = document.createElement('iframe');
    iframe.className = 'video-iframe';
    iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0`;
    iframe.allow = 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture';
    iframe.allowFullscreen = true;
    
    const videoItem = thumbnailElement.closest('.video-item');
    const thumbnailContainer = videoItem.querySelector('.video-thumbnail');
    thumbnailContainer.parentNode.replaceChild(iframe, thumbnailContainer);
}

// ÿ™ÿ≠ÿ≥ŸäŸÜ: ÿ™ŸÇŸÑŸäŸÑ ÿπÿØÿØ ÿßŸÑŸÜÿ¨ŸàŸÖ ŸÑŸÑÿ£ÿ¨Ÿáÿ≤ÿ© ÿßŸÑÿ∂ÿπŸäŸÅÿ©
function createCosmos() {
    const cosmicBg = document.getElementById('cosmicBg');
    cosmicBg.innerHTML = '';
    
    // ÿ™ŸÇŸÑŸäŸÑ ÿπÿØÿØ ÿßŸÑŸÜÿ¨ŸàŸÖ ŸÑŸÑÿ£ÿ¨Ÿáÿ≤ÿ© ÿßŸÑÿ∂ÿπŸäŸÅÿ©
    const isMobile = window.innerWidth < 768;
    const starCount = isMobile ? 80 : 150;
    const cometCount = isMobile ? 2 : 5;
    
    for (let i = 0; i < starCount; i++) {
        const star = document.createElement('div');
        star.classList.add('star');
        star.style.left = Math.random() * 100 + 'vw';
        star.style.top = Math.random() * 100 + 'vh';
        star.style.width = (Math.random() * 2 + 1) + 'px';
        star.style.height = star.style.width;
        star.style.color = i % 3 === 0 ? 'var(--accent-pink)' : 
                         i % 2 === 0 ? 'var(--accent-gold)' : 'white';
        star.style.setProperty('--duration', (Math.random() * 5 + 3) + 's');
        star.style.opacity = 0.7;
        cosmicBg.appendChild(star);
    }
    
    for (let i = 0; i < cometCount; i++) {
        const comet = document.createElement('div');
        comet.classList.add('comet');
        comet.style.left = Math.random() * 100 + 'vw';
        comet.style.top = Math.random() * 100 + 'vh';
        comet.style.setProperty('--duration', (Math.random() * 20 + 15) + 's');
        comet.style.animationDelay = Math.random() * 5 + 's';
        cosmicBg.appendChild(comet);
    }
}

// ÿ™ÿ≠ÿ≥ŸäŸÜ: ÿ•ÿ∂ÿßŸÅÿ© ŸÅŸäÿØŸäŸà ŸÖÿπ ÿ™ÿ≠ÿØŸäÿ´ Ÿàÿßÿ≠ÿØ ŸÅŸÇÿ∑
function addVideo(url) {
    const videoId = extractVideoId(url);
    
    if (!videoId) {
        Swal.fire({
            icon: 'error',
            title: 'Invalid URL',
            text: '3omri, please enter a valid YouTube URL! ‚ù§',
            confirmButtonColor: 'var(--accent-pink)',
            background: 'var(--main-bg)',
            color: 'var(--text-color)'
        });
        return;
    }

    Swal.fire({
        title: 'Add Video Title',
        input: 'text',
        inputLabel: 'Give this video a sweet name:',
        inputPlaceholder: 'Our Song üíñ',
        showCancelButton: true,
        confirmButtonText: 'Add',
        cancelButtonText: 'Cancel',
        background: 'var(--main-bg)',
        color: 'var(--text-color)',
        inputAttributes: {
            autocapitalize: 'off'
        },
        preConfirm: (title) => {
            if (!title) title = "Our Memory";
            
            return database.ref('playlist').push().set({
                videoId: videoId,
                title: title,
                date: new Date().toISOString(),
                addedAt: firebase.database.ServerValue.TIMESTAMP
            })
            .then(() => {
                loadVideos(); // ÿ•ÿπÿßÿØÿ© ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÅŸäÿØŸäŸàŸáÿßÿ™ ÿ®ÿπÿØ ÿßŸÑÿ•ÿ∂ÿßŸÅÿ©
                return { success: true };
            })
            .catch(error => {
                throw new Error(error.message);
            });
        }
    }).then((result) => {
        if (result.isConfirmed && result.value.success) {
            Swal.fire({
                icon: 'success',
                title: 'Added!',
                text: 'Video added with love. üåô‚ú®',
                confirmButtonColor: 'var(--accent-pink)',
                background: 'var(--main-bg)',
                color: 'var(--text-color)'
            });
            document.getElementById('youtube-url').value = '';
        }
    });
}

// ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ŸÖÿπÿ±ŸÅ ÿßŸÑŸÅŸäÿØŸäŸà ŸÖŸÜ ÿßŸÑÿ±ÿßÿ®ÿ∑
function extractVideoId(url) {
    if (!url) return null;
    
    // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸÖÿπÿ±ŸÅ ŸÅŸäÿØŸäŸà ŸÅŸÇÿ∑ (11 ÿ≠ÿ±ŸÅ)
    if (/^[a-zA-Z0-9_-]{11}$/.test(url)) {
        return url;
    }
    
    const patterns = [
        /(?:https?:\/\/)?(?:www\.)?youtube\.com\/watch\?v=([a-zA-Z0-9_-]{11})/,
        /(?:https?:\/\/)?(?:www\.)?youtu\.be\/([a-zA-Z0-9_-]{11})/,
        /(?:https?:\/\/)?(?:www\.)?youtube\.com\/embed\/([a-zA-Z0-9_-]{11})/,
        /(?:https?:\/\/)?(?:www\.)?youtube\.com\/shorts\/([a-zA-Z0-9_-]{11})/,
        /[?&]v=([a-zA-Z0-9_-]{11})/
    ];
    
    for (const pattern of patterns) {
        const match = url.match(pattern);
        if (match && match[1]) {
            return match[1];
        }
    }
    
    return null;
}

// ÿ™ÿ≠ÿ≥ŸäŸÜ: ÿ≠ÿ∞ŸÅ ÿßŸÑŸÅŸäÿØŸäŸà ŸÖÿπ ÿ±ÿ≥ÿßŸÑÿ© ÿ™ÿ£ŸÉŸäÿØ
function deleteVideo(firebaseKey) {
    Swal.fire({
        title: 'Are you sure?',
        text: "3omri, this video will be removed from our playlist!",
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: 'var(--accent-pink)',
        cancelButtonColor: 'var(--accent-purple)',
        confirmButtonText: 'Yes, delete it!',
        cancelButtonText: 'Cancel',
        background: 'var(--main-bg)',
        color: 'var(--text-color)'
    }).then((result) => {
        if (result.isConfirmed) {
            const deleteBtn = event.target.closest('.delete-video');
            if (deleteBtn) {
                deleteBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
                deleteBtn.disabled = true;
            }
            
            database.ref('playlist').child(firebaseKey).remove()
                .then(() => {
                    // ÿ•ÿÆŸÅÿßÿ° ÿßŸÑŸÅŸäÿØŸäŸà ÿ®ÿ≥ŸÑÿßÿ≥ÿ©
                    const videoItem = deleteBtn ? deleteBtn.closest('.video-item') : null;
                    if (videoItem) {
                        videoItem.style.opacity = '0';
                        videoItem.style.transform = 'translateY(-20px)';
                        setTimeout(() => {
                            videoItem.remove();
                            // ÿ•ÿ∞ÿß ŸÑŸÖ Ÿäÿ™ÿ®ŸÇ ŸÅŸäÿØŸäŸàŸáÿßÿ™ÿå ÿπÿ±ÿ∂ ÿ±ÿ≥ÿßŸÑÿ©
                            const container = document.getElementById('videos-container');
                            if (container.children.length === 0) {
                                container.innerHTML = '<div style="text-align:center;padding:2rem;color:var(--accent-gold)">No videos yet. Add the first one! ‚ù§</div>';
                            }
                        }, 300);
                    } else {
                        loadVideos(); // ÿ•ÿπÿßÿØÿ© ÿ™ÿ≠ŸÖŸäŸÑ ÿ•ÿ∞ÿß ŸÑŸÖ ŸÜÿ¨ÿØ ÿßŸÑÿπŸÜÿµÿ±
                    }
                })
                .catch(error => {
                    console.error("Error deleting video:", error);
                    if (deleteBtn) {
                        deleteBtn.innerHTML = '<i class="fas fa-times"></i>';
                        deleteBtn.disabled = false;
                    }
                    Swal.fire({
                        icon: 'error',
                        title: 'Error',
                        text: 'Sorry 3omri, couldn\'t delete it. Try again?',
                        confirmButtonColor: 'var(--accent-pink)',
                        background: 'var(--main-bg)',
                        color: 'var(--text-color)'
                    });
                });
        }
    });
}

// ÿ™ÿ≠ÿ≥ŸäŸÜ: ÿ™ŸáŸäÿ¶ÿ© ÿßŸÑÿµŸÅÿ≠ÿ©
document.addEventListener('DOMContentLoaded', function() {
    // ÿ•ÿπÿØÿßÿØ ÿ≤ÿ± ÿßŸÑÿ•ÿ∂ÿßŸÅÿ©
    const addButton = document.getElementById('add-video');
    const urlInput = document.getElementById('youtube-url');
    
    addButton.addEventListener('click', function() {
        const url = urlInput.value.trim();
        if (url) {
            addVideo(url);
        } else {
            Swal.fire({
                icon: 'warning',
                title: 'Empty URL',
                text: 'Please enter a YouTube URL first!',
                confirmButtonColor: 'var(--accent-pink)',
                background: 'var(--main-bg)',
                color: 'var(--text-color)'
            });
        }
    });
    
    // ÿßŸÑÿ≥ŸÖÿßÿ≠ ÿ®ÿßŸÑÿ•ÿØÿÆÿßŸÑ ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ Enter
    urlInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            addButton.click();
        }
    });
});

// ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑŸÅŸäÿØŸäŸà ÿßŸÑŸÖÿ≠ŸÑŸä
function playVideo() {
    const video = document.getElementById('ourLoveVideo');
    const overlay = document.querySelector('.video-overlay');
    
    video.play()
        .then(() => {
            overlay.style.opacity = '0';
            setTimeout(() => {
                overlay.style.display = 'none';
            }, 500);
        })
        .catch(error => {
            console.error("Error playing video:", error);
            // ÿ•ÿ∞ÿß ŸÅÿ¥ŸÑ ÿßŸÑÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿäÿå ÿπÿ±ÿ∂ ÿ≤ÿ± ÿßŸÑÿ™ÿ¥ÿ∫ŸäŸÑ
            overlay.style.display = 'flex';
        });
}

function showComingSoon() {
    Swal.fire({
        title: 'Coming Soon! ‚ú®',
        html: "me is preparing something special for 3omrii's section<br>Stay tuned!",
        imageUrl: 'https://i.postimg.cc/4yWh9qn2/Screenshot-20250627-181732-Photos.jpg',
        imageWidth: 200,
        imageAlt: 'Khadija Heart',
        confirmButtonText: 'Excited!',
        background: 'var(--main-bg)',
        color: 'var(--text-color)',
        confirmButtonColor: 'var(--accent-pink)'
    });
}

// ÿ≠ŸÖÿßŸäÿ© ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±
function checkPassword() {
    const password = document.getElementById('password-input').value;
    const errorMsg = document.getElementById('error-msg');
    
    if (password === atob("Mjg=")) { 
        document.getElementById('password-protection').style.opacity = '0';
        document.getElementById('password-protection').style.pointerEvents = 'none';
        
        // ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÉŸàŸÜ
        createCosmos();
        
        // ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÅŸäÿØŸäŸàŸáÿßÿ™ ÿ®ÿπÿØ ŸÅÿ™ÿ≠ ÿßŸÑÿ≠ŸÖÿßŸäÿ©
        setTimeout(() => {
            loadVideos();
            document.getElementById('password-protection').style.display = 'none';
            
            // Initialize countdown timer after password is entered
            initCountdown();
        }, 500);
    } else {
        errorMsg.textContent = "Incorrect code, try again";
        document.getElementById('password-input').value = '';
        setTimeout(() => { errorMsg.textContent = ''; }, 2000);
    }
}

// ŸÖŸÜÿπ ÿßŸÑŸÜŸÇÿ± ÿ®ÿ≤ÿ± ÿßŸÑŸÖÿßŸàÿ≥ ÿßŸÑÿ£ŸäŸÖŸÜ
document.addEventListener('contextmenu', function(e) {
    e.preventDefault();
});

// ÿ™ÿ≠ÿ≥ŸäŸÜ: ŸÖŸÜÿπ ÿ®ÿπÿ∂ ÿßÿÆÿ™ÿµÿßÿ±ÿßÿ™ ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖŸÅÿßÿ™Ÿäÿ≠
document.addEventListener('keydown', function(e) {
    if (e.ctrlKey && (e.key === 'u' || e.key === 's' || e.key === 'c')) {
        e.preventDefault();
    }
});

function showGiftVideo() {
    Swal.fire({
        title: 'üíù',
        html: `<div style="position:relative; padding-top:56.25%">
                  <video controls autoplay style="position:absolute;top:0;left:0;width:100%;height:100%;border-radius:10px;box-shadow:0 5px 25px rgba(255,75,138,0.3)">
                      <source src="/3omri/khadija/assets/videos/mybday.mp4" type="video/mp4">
                  </video>
               </div>
               <p style="margin-top:10px;font-style:italic;color:var(--accent-gold)">ro7o bday gift for me~</p>`,
        width: '80%',
        background: 'var(--main-bg)',
        color: 'var(--text-color)',
        showCloseButton: true,
        showConfirmButton: false,
        customClass: {
            popup: 'custom-video-popup'
        }
    });
}

// ÿ™ÿ≠ÿ≥ŸäŸÜ: ŸÖŸÜÿπ ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ≤ÿßÿ¶ÿØ ÿπŸÜÿØ ÿßŸÑÿ™ŸÖÿ±Ÿäÿ±
let isScrolling = false;
window.addEventListener('scroll', function() {
    if (!isScrolling) {
        window.requestAnimationFrame(function() {
            // ÿ•ŸäŸÇÿßŸÅ ÿßŸÑÿ±ÿ≥ŸàŸÖ ÿßŸÑŸÖÿ™ÿ≠ÿ±ŸÉÿ© ÿßŸÑÿ´ŸÇŸäŸÑÿ© ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑÿ™ŸÖÿ±Ÿäÿ±
            document.querySelectorAll('.star, .comet').forEach(el => {
                el.style.animationPlayState = 'paused';
            });
            
            setTimeout(() => {
                document.querySelectorAll('.star, .comet').forEach(el => {
                    el.style.animationPlayState = 'running';
                });
                isScrolling = false;
            }, 100);
        });
    }
    isScrolling = true;
});
</script>
</body>
</html>
